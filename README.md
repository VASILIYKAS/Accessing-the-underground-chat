Скрипт для взаимодействия с публичным чатом MineChat (minechat.dvmn.org):

Чтение чата: подключается к порту 5000, получает сообщения в реальном времени, выводит в консоль и сохраняет в лог-файл с временной меткой.
Отправка сообщений: подключается к порту 5050, отправляет сообщения от пользователя.
Автоматическая регистрация: если пользователь не зарегистрирован и не указан токен, создаёт новый аккаунт с заданным или автоматическим именем.


## Оглавление

- [Переменные окружения](#переменные-окружения)
- [Как установить](#как-установить)
- [Как запустить](#как-запустить)
- [Параметры запуска](#параметры-запуска)
- [Как развернуть на сервере](#как-развернуть-на-сервере)
- [Цели проекта](#цели-проекта)


## Переменные окружения

В проекте не обязательно, но возможно использование переменных окружения для изменения настроек чата. В репозитории уже есть шаблон `example.env`, который нужно скопировать и настроить:
1. Скопируйте файл example.env в .env:
- Выполните команду:
```bash
cp example.env .env
```
2. Откройте файл `.env` в текстовом редакторе.
3. Укажите свои значение переменных после знака `=` или оставьте как есть:

- `HOST`. Адрес подключения к чату. По умолчанию `minechat.dvmn.org`.
```sh
HOST=minechat.dvmn.org
```

- `READ_PORT`. Порт для подключения к чату (только читать). По умолчанию используется порт `5000`.
```sh
READ_PORT=5000
```

- `WRITE_PORT`. Порт для подключения к чату (только отправлять сообщения). По умолчанию используется порт `5050`.
```sh
WRITE_PORT=5000
```

- `LOGS`. Путь для сохранения файла с историей переписки. По умолчанию файл сохраняется в корень проекта `underground_chat.txt`
```sh
LOGS=underground_chat.txt
```

- `LOGGING`. Включить или выключить логирование. По умолчанию выключено.
```sh
LOGGING=false
```

- `USER_NAME`. Ваше имя при отправке сообщений. По умолчанию "NewUser".
```sh
USER_NAME=Vasily
```

## Как установить

Для работы проекта нужен Python версии не ниже Python 3.10.

```bash
pip install -r requirements.txt
```

## Как запустить
Скрипт `read_chat.py`:\
- Для чтения чата запустите `read_chat.py`:
```bash
python3 read_chat.py
```
 - Произойдет подключение к чату и будут выводиться сообщения в терминале, а также записываться в файл с указанием времени сообщения.

Скрипт `write_chat.py`:\
- Для запуска используйте скрипт `write_chat.py` с необходимыми аргументами:

- Для отправки сообщений запустите в отдельном терминале:
```bash
python3 write_chat.py --message Hello!
```
- При первом запуске скрипта будет совершена регистрация в чате.
- Будет отправлено сообщение "Hello!" от имени NewUser в чат (если вы не указывали имя в переменных окружения.)

- Для регистрации используйте команду:
```bash
python3 write_chat.py --user-name ваше_имя
```

- Ваши данные буду сохранены в отдельный файл `register_info.json`, и при последующих отправках сообщений будут использоваться эти данные.



## Параметры запуска
Проект поддерживает следующие аргументы:\
Для скрипта `read_chat.py`:

- `--host`, строка, `minechat.dvmn.org` - адрес для подключения.
- `--port`, целое число, `5000` - порт для чтения чата.
- `--log-path`, строка, `underground_chat.txt` - путь сохранения истории чата.

Для скрипта `write_chat.py`:

- `--host`, строка, `minechat.dvmn.org` - адрес для подключения.
- `--port`, целое число, `5050` - порт для отправки сообщений.
- `--message`, строка, `"Hello!"` - сообщение для отправки (обязательно для отправки).
- `--logging`, флаг, без значения - включить отладочное логирование.
- `--user-name`, строка, `Vasiliy` - имя для автоматической регистрации (если токен не задан).
- `--user-token`, строка, `xxxxxx-xxx-xxxx` - токен существующего аккаунта.

> Все аргументы опциональны.


Примеры:
Для скрипта `read_chat.py`:
```bash
# Обычный запуск
python3 read_chat.py

# С указанием пути к катологу
python3 read_chat.py --log-path /path/to/chat.txt

# Все параметры вместе
python3 read_chat.py --log-path /path/to/chat.txt --host minechat.dvmn.org --port 5000
```

Для скрипта `write_chat.py`:
```bash
# Обычный запуск
python3 write_chat.py

# С включением логирования
python3 write_chat.py --logging

# Регистрация
python3 write_chat.py --user-name Vasiliy

# Отправка сообщения
python3 write_chat.py --message "Hello!"

# Комбинация параметров
python3 write_chat.py --host minechat.dvmn.org --port 5050 --logging --user-name Vasiliy
```


# Цели проекта

Код написан в учебных целях — это урок в курсе по Python и веб-разработке на сайте [Devman](https://dvmn.org).